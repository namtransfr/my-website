var base_url="https://frukt.pantip.com/",jsapp="kokos",kokosApi=base_url+jsapp+"/page/",kokosApiRd=base_url+"kokos/rd_page_random/",dispScriptUrl=base_url+jsapp+"/display/",hitUrl=base_url+jsapp+"/hit/",slotUrl=base_url+jsapp+"/position_slot/",kokosApiCt=base_url+"kokos/rd_page_random_5min/",atime=[1e3],troom=["all_room","greenzone","isolate"],troom2=["korea","rajdumnern"],meatball_start=20230925,meatball_start2=20231003,mb_all_room=!0,mb_all_room_date=20231030,mb_room=[["greenzone","isolate"],["korea","rajdumnern"]],mb_date=[20230925,20231003],arr_position=["1104-0","1104-1","1104-2","1105-0","1105-1","1105-2","1108-0","1108-1","1108-2","1205-0"],arr_pos_null=[],loaded=!1;function check_meatball(e,t){var i=[],s=e;if(i.is_meatball=!1,i.date_mb=0,0==mb_all_room){"home"==s&&"home"==t[1]&&(s=["pantip-home"]);for(var n=0;n<mb_room.length;n++)if(1==inArray_haystack(s,mb_room[n])){i.is_meatball=!0,i.date_mb=mb_date[n];break}}if(1==mb_all_room){"home"==s&&"home"==t[1]&&(s=["pantip-home"]);for(n=0;n<mb_room.length;n++)if(1==inArray_haystack(s,mb_room[n])){i.is_meatball=!0,i.date_mb=mb_date[n];break}i.is_meatball=!0,0==i.date_mb&&(i.date_mb=mb_all_room_date)}return i}function create_count_css(){document.getElementsByTagName("body");var e=document.createElement("style");e.type="text/css",e.innerHTML="a.bingsu-counting { float: left;color: #7e79ad;padding: 0px 5px;margin: 0 2px;text-decoration: none;border: #3c3a62 solid 1px;cursor:pointer;line-height: 1.3;} .bingsu-counting.selected{background: #7b77aa;color: #eee;border-radius: 4px;display: inline-flex;margin-left: 4px;}",document.getElementsByTagName("head")[0].appendChild(e)}function kokosMaker(e){var t=new Date,i=t.getTime(),s=t.getFullYear(),n=t.getMonth(),o=t.getDate();(n+=1)<10&&(n="0"+n),o<10&&(o="0"+o);var a=s.toString()+n.toString()+o.toString(),r=kokosApi,l=e.split(":"),c=check_meatball(l[l.length-1],l);1==c.is_meatball&&a>=c.date_mb&&(!0,r=kokosApiCt),fetch(r+e+"?t="+i,{cache:"no-cache",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){var i=JSON.stringify(t),s=new Array,n=new Array,o=0,a=0;if("string"==typeof i){var r=JSON.parse(i);if("object"==typeof r)for(var l=0;l<r.length;l++)"slot"===r[l].type?(n[a]=r[l],a+=1):(s[o]=r[l],o+=1)}genKokos(JSON.stringify(s),!1,e),setTimeout((function(){genKokos(JSON.stringify(n),!1,e),slidePage()}),1e3)}))}function kokosTabMaker(e){var t=new Date,i=t.getTime(),s=t.getFullYear(),n=t.getMonth(),o=t.getDate();(n+=1)<10&&(n="0"+n),o<10&&(o="0"+o);var a=s.toString()+n.toString()+o.toString(),r=kokosApi,l=e.split(":"),c=l.length-1,m=check_meatball(l[c],l);1==m.is_meatball&&a>=m.date_mb&&(!0,r=kokosApiCt),l[c],fetch(r+e+"/tab?t="+i,{cache:"no-cache",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){var i=JSON.stringify(t),s=new Array,n=new Array,o=0,a=0;if("string"==typeof i){var r=JSON.parse(i);if("object"==typeof r)for(var l=0;l<r.length;l++)"slot"===r[l].type?(n[a]=r[l],a+=1):(s[o]=r[l],o+=1)}genKokos(JSON.stringify(s),!0,e),setTimeout((function(){genKokos(JSON.stringify(n),!1,e),slidePage()}),1e3)}))}function genKokos(e,t,i){var s=i.split(":"),n=t;if("string"==typeof e){var o=JSON.parse(e);if("object"==typeof o)for(var a=0;a<o.length;a++)if(t=n,"slot"===o[a].type){for(var r=o[a].items,l=[],c=o[a].position.split(":"),m=0;m<r.length;m++)l.push(m);1205!=c[3]&&1201!=c[3]&&(l=shuffle(l));var p=[],d=[];if(l.length>0)for(var h=0;h<l.length;h++)p[h]=r[l[h]].bingsu_id,r[l[h]].position=o[a].position,r[l[h]].type=o[a].type,d[h]=r[l[h]];else p=r.bingsu_id,r.position=o[a].position,r.type=o[a].type,displayKokos(i,t,d=r,o[a].position,l.length,p);c=o[a].position.split(":");if("mpantip"==s[0]&&1103==c[3]){var f=o[a].position;d.position=f,d.type=o[a].type,displayKokos(i,t,d,f,l.length,p)}else if(c[3]>=1003&&c[3]<=1005||1201==c[3]||1205==c[3]){f=o[a].position;d.position=o[a].position,d.type=o[a].type,d.max_slot=o[a].slot_option.random,d.items=o[a].items,displayKokos(i,t,d,f,l.length,p)}else{var g="";if(l.length>0)for(m=0;m<l.length;m++){f="";f=1205==c[3]?o[a].position:o[a].position+"-"+m;var _=c[3]+"-"+m;displayKokos(i,t=!(g!=o[a].position||!inArray(_)),d[m],f,l.length,p),g=o[a].position}}}else{o[a].position;displayKokos(i,t,o[a],o[a].position)}}}function displayKokos(e,t,i,s,n,o){var a=!1,r=e.split(":");if(id_pos=0,null!=i.position){var l=i.position.split(":");id_pos=l[l.length-1]}try{if("slot"==i.type){if("mpantip"==r[0]&&null==document.getElementById(s)&&("mpantip"==r[0]?s=s.substring(1):"pantip"==r[0]&&(s="m"+s)),null!=document.getElementById(s)&&""===document.getElementById(s).innerHTML.trim())if(a=!0,"1103"==id_pos&&"mpantip"==l[0]){var c=0;if(null!=i[c=0==(f=(g=(new Date).getTime())%(_=4))?_-1:f-1]){if("Script"!=i[c].source.type_file)document.getElementById(s).innerHTML=i[c].html;else{var m=i[c].html;scrt_check=m.replace(/<div class="ads_box_type1 m-b-20">/g,""),scrt_check=scrt_check.replace(/(\r\n|\n|\r)/gim,"");scrt_check.search(/^<(script|ins|iframe)/gim);var p=s.search(/^mpantip/gi),d="",h="pt-md-toggle-show";p>=0&&(d="/mobile",h="pt-md-toggle-hide"),a=!1,document.getElementById(s).innerHTML='<iframe src="'+base_url+jsapp+"/show_ifrm_app/"+i[c].bingsu_id+d+'" width="100%" height="286" frameborder="0" class="ads_box_type1 m-b-20"  style="padding: 8px;overflow:hidden;" title="ads"></iframe>'}""!=i[c].html&&1==a&&view_stat(e,t,i[c].bingsu_id)}}else if(id_pos>=1003&&id_pos<=1005||1201==id_pos||1205==id_pos){c=0;var f,g=(new Date).getTime(),_=i.max_slot;if(id_pos>=1003&&id_pos<=1005&&i.max_slot>i.items.length&&(_=i.items.length),null!=i[c=0==(f=g%_)?_-1:f-1]){if(document.getElementById(s).classList.add("pt-list-item"),"Script"!=i[c].source.type_file)document.getElementById(s).innerHTML=i[c].html;else{m=i[c].html;var u=i[0].size.height;u=i[0].size.height+36;scrt_check=m.replace(/<div class="ads_box_type1 m-b-20">/g,""),scrt_check=scrt_check.replace(/(\r\n|\n|\r)/gim,"");scrt_check.search(/^<(script|ins|iframe)/gim);a=!1;p=s.search(/^mpantip/gi),d="",h="pt-md-toggle-show";p>=0&&(d="/mobile",h="pt-md-toggle-hide");1004==id_pos&&"",document.getElementById(s).innerHTML='<iframe src="'+base_url+jsapp+"/show_ifrm_app/"+i[c].bingsu_id+d+'" width="100%" height="'+u+'" frameborder="0" class="ads_box_type1 m-b-20"  style="padding: 8px;overflow:hidden;" title="ads"></iframe>'}""!=i[c].html&&1==a&&1201!=id_pos&&view_stat(e,t,i[c].bingsu_id)}}else{if("Script"==i.source.type_file){m=i.html;scrt_check=m.replace(/<div class="ads_box_type1 m-b-20">/g,""),scrt_check=scrt_check.replace(/(\r\n|\n|\r)/gim,"");scrt_check.search(/^<(script|ins|iframe)/gim);a=!1;p=s.search(/^mpantip/gi),d="";p>=0&&(d="/mobile"),document.getElementById(s).innerHTML='<iframe src="'+base_url+jsapp+"/show_ifrm_app/"+i.bingsu_id+d+'" width="100%" height="282" frameborder="0" class="ads_box_type1 m-b-20"  style="padding: 8px;overflow:hidden;" title="ads"></iframe>'}else if(1==inArray(s)){var y=document.getElementById(s),b=(l=s.split("-"))[0].split(":"),k=(c=b.length-1,"");k="1108"==b[c]?"":" pt-list-item__ad-card-view";var v=y.parentNode,w=document.createElement("li");if(0==l[l.length-1]?w.className="pt-list-item ad-slot"+k:(w.className="pt-list-item ad-slot"+k,w.style.display="none"),w.id=s,i.html=i.html+'<div class="pt-list-item__stats" style="justify-content: center;">',n>1)for(var x=1;x<=n;x++){var E="";1==x&&(E=" selected"),i.html=i.html+'<a class="bingsu-counting clk-slot '+l[0]+E+'" data-posads="'+l[0]+'" data-bingid="'+o[x-1]+'"><span>'+x+"</span></a>"}i.html=i.html+"</div>",w.innerHTML=stripAndExecuteScript(i.html),v.replaceChild(w,y),document.getElementById(s).innerHTML=stripAndExecuteScript(i.html)}else document.getElementById(s).innerHTML=stripAndExecuteScript(i.html);""!=i.html&&1==a&&view_stat(e,t,i.bingsu_id)}}else if(null!=document.getElementById(s)&&""===document.getElementById(s).innerHTML.trim()){if("Script"!=i.items[0].source.type_file){var T=i.position.split(":");troom.length>0&&("all_room"==troom[0]||0==inArray_haystack(T[2],troom))&&(a=!0),!1===t&&(document.getElementById(s).innerHTML=i.items[0].html)}else{m=i.items[0].html;scrt_check=m.replace(/<div class="ads_box_type1 m-b-20">/g,""),scrt_check=scrt_check.replace(/(\r\n|\n|\r)/gim,"");scrt_check.search(/^<(script|ins|iframe)/gim);a=!1;p=s.search(/^mpantip/gi),d="",h="pt-md-toggle-show";if(p>=0&&(d="/mobile"),p>=0&&(d="/mobile",h="pt-md-toggle-hide"),!1===t){var A=265;null!=i.items[0].size_banner&&(A=i.items[0].size_banner.height+10),document.getElementById(s).innerHTML=p>=0?'<div class=" '+h+'"><iframe src="'+base_url+jsapp+"/show_ifrm_app/"+i.items[0].bingsu_id+d+'" width="100%" height="'+A+'" frameborder="0" title="ads" ></iframe></div>':'<div class="ads_box_type1 ads_with_iframe m-b-20 '+h+'"><iframe src="'+base_url+jsapp+"/show_ifrm_app/"+i.items[0].bingsu_id+d+'" width="100%" height="'+A+'" frameborder="0" class="ads_box_iframe" title="ads"></iframe></div>'}}""!=i.items[0].html&&1==a&&(null!=i.nor_rem&&(e=e+":"+i.nor_rem),l[0],!1===t&&"Script"!=i.items[0].source.type_file&&view_stat(e,t,i.items[0].bingsu_id))}}catch(e){}}function view_stat(e,t,i){if(loaded=!0,!1===t){var s=(new Date).getTime();fetch(base_url+"kokos/viewStat/"+i+"/"+e+"?t="+s,{cache:"no-cache",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){})).then((function(e){return!0}))}}function del_select(e,t,i,s){for(var n=0;n<e.length;n++){e[n].className.search(t)>-1&&(i!=e[n].innerText?e[n].classList.remove("selected"):e[n].classList.add("selected"))}for(n=1;n<=s;n++){var o=n-1;null!=document.getElementById(t+"-"+o)&&(document.getElementById(t+"-"+o).style.display="none",n==i&&document.getElementById(t+"-"+o).style.removeProperty("display"))}}function hasClass(e,t){return new RegExp(" "+t+" ").test(" "+e.className+" ")}function slidePage(){var e=document.querySelectorAll(".bingsu-counting");for(i=0;i<e.length;i++)e.item(i).onclick=function(){var t=(new Date).getTime();if(0==hasClass(this,"selected")){var s=this.getAttribute("data-bingid");fetch(slotUrl+s+"?t="+t,{cache:"no-cache"}).then((function(e){return e.json()})).then((function(e){}))}var n=this.children[0].innerHTML,o=this.getAttribute("class"),a=o.search(/\sselected|selected/),r=this.getAttribute("data-posads");i;del_select(e,r,n,3),-1==a&&(this.class=o.trim()+" selected",this.style.display="block",this.className=this.class)}}function sleep(e){return new Promise((function(t){setTimeout((function(){t()}),e)}))}function shuffle(e){var t,i,s;for(s=e.length-1;s>0;s--)t=Math.floor(Math.random()*(s+1)),i=e[s],e[s]=e[t],e[t]=i;return e}function iframe_scrt(e,t,i,s){t=t.replace(/\//g,"|slsh|"),t=escape(t.replace(/(\r\n|\n|\r)/gim,"")),document.getElementById(e).innerHTML='<iframe src="'+base_url+jsapp+"/show_ifrm/"+t+'" width="'+i+'" height="'+s+'" frameborder="0" class="ads_box_type1 m-b-20"  style="padding: 8px;overflow:hidden;" title="ads"></iframe>'}function stripAndExecuteScript(e){return e}function inArray(e){for(var t=arr_position.length,i=e.split(":"),s=i.length-1,n=0;n<t;n++)if(arr_position[n]==i[s])return!0;return!1}function inArray_haystack(e,t){for(var i=t.length,s=0;s<i;s++)if(t[s]==e)return!0;return!1}create_count_css(),window.addEventListener("load",(function(e){let t,i,s=document.getElementsByClassName("ads_box_iframe"),n=document.getElementsByClassName("ads_with_iframe");function o(){for(let e=0;e<s.length;e++)n[e].offsetWidth>=1044&&(i=(n[e].offsetWidth-74)/970,n[e].style.height=(n[e].offsetWidth-100)/970*285+"px"),n[e].offsetWidth<1044&&n[e].offsetWidth>=1004&&(t=n[e].offsetWidth-970,i=(n[e].offsetWidth-t)/970,n[e].style.height=n[e].offsetWidth/970*285+"px"),n[e].offsetWidth<1004&&n[e].offsetWidth>970&&(i=(n[e].offsetWidth-32)/970,n[e].style.height=n[e].offsetWidth/970*285+"px"),n[e].offsetWidth<=970&&(i=(n[e].offsetWidth-32)/970,n[e].style.height=n[e].offsetWidth/970*285+"px"),n[e].style.height>="285px"&&(n[e].style.height="285px"),i>=1&&(i=1,s[e].style.transform="scale("+i+")"),i<=.34?(i=.34,s[e].style.transform="scale("+i+")"):s[e].style.transform="scale("+i+")"}o(),window.addEventListener("resize",(function(){o()})),window.addEventListener("click",(function(){o()}))}),!1);